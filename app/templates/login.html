{% extends "layout.html" %}
{% block content %}

<div class="content-card">
    <div class="auth-container">

        <div class="form-section">
            <h2>Sign In</h2>
            <form method="POST" action="{{ url_for('auth.login_register') }}" novalidate>
                {{ login_form.hidden_tag() }}
                <p>
                    {{ login_form.username.label }}<br>
                    {{ login_form.username(size=32) }}
                </p>
                <p>
                    {{ login_form.password.label }}<br>
                    {{ login_form.password(size=32) }}
                </p>
                <p>{{ login_form.submit_login(class="btn") }}</p>
            </form>
            
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        {% if category == 'danger' %} <!-- Only show login errors here -->
                            <div class="alert-message alert-danger">{{ message }}</div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </div>

        <div class="form-section">
            <h2>Register</h2>
            <form method="POST" action="{{ url_for('auth.login_register') }}" novalidate>
                {{ reg_form.hidden_tag() }}
                <p>
                    {{ reg_form.username.label }}<br>
                    {{ reg_form.username(size=32) }}
                </p>
                <p>
                    {{ reg_form.email.label }}<br>
                    {{ reg_form.email(size=32) }}
                </p>
                <p>
                    {{ reg_form.password.label }}<br>
                    {{ reg_form.password(size=32) }}
                </p>
                <p>
                    {{ reg_form.password2.label(text='Confirm Password') }}<br>
                    {{ reg_form.password2(size=32) }}
                </p>
                <p>{{ reg_form.submit_register(class="btn") }}</p>
            </form>
        </div>

    </div>
</div>
{% endblock %}